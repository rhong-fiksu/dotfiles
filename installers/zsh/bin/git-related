#!/bin/sh
#
# Show files that were changed in the same commits for the given filepath.
# Useful for needing to find related files.
#
# Usage: git-related path/to/my/file.sh

# list all commit SHAs for filepath
git log --follow --format=format:%H $1 |
  # list filepaths for changes for SHA
  xargs -L1 git diff-tree --no-commit-id --name-only -r |
  # count up unique instances of each filename
  sort | uniq -c |
  # sort by # of instances in descending order
  sort -rn
